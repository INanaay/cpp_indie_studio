#include <irrlicht.h>

int main()
{
	irr::IrrlichtDevice *device = irr::createDevice(irr::video::EDT_SOFTWARE, irr::core::dimension2d<irr::u32>(640, 480), 16,
							false, false, false, 0) ;
	device->setWindowCaption(L"Slt");
	irr::video::IVideoDriver *driver = device->getVideoDriver();
	irr::scene::ISceneManager *smgr = device->getSceneManager();
	irr::gui::IGUIEnvironment *guienv = device->getGUIEnvironment();
	guienv->addStaticText(L"Yo cesst un test", irr::core::rect<irr::s32>(10, 10, 262, 22), true);
	irr::scene::IAnimatedMesh *mesh = smgr->getMesh("BomberMan.b3d");
	if (!mesh)
	{
		device->drop();
		return 1;
	}
	irr::scene::IAnimatedMeshSceneNode *node = smgr->addAnimatedMeshSceneNode(mesh);
	if (node)
	{
		node->setMaterialFlag(irr::video::EMF_LIGHTING, false);
		node->setMaterialTexture(0, driver->getTexture("FinalRender.png") );
		node->setFrameLoop(0, 0);
		node->setPosition(irr::core::vector3df(-5,0,0));
	}
	smgr->addCameraSceneNode(0, irr::core::vector3df(10,10,-10), irr::core::vector3df(0,0,0));
	float i = 0;
	while (device->run()) {
		driver->beginScene(true, true, irr::video::SColor(255, 200, 101, 140));
		smgr->drawAll();
		node->setRotation(irr::core::vector3df(0, i++, 0));
		guienv->drawAll();
		driver->endScene();
	}
	device->drop();
	return 0;
}